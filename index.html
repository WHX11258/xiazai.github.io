<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>云端文件存储中心</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            success: '#52C41A',
            danger: '#FF4D4F',
            dark: '#1D2129',
            light: '#F2F3F5'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #165DFF 0%, #0E42D2 100%);
      }
      .upload-shadow {
        box-shadow: 0 10px 30px rgba(22, 93, 255, 0.15);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(22, 93, 255, 0.2);
      }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark">
  <!-- 导航栏 -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-sm shadow-sm transition-all duration-300">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <a href="#" class="flex items-center space-x-2">
            <i class="fa fa-cloud-upload text-primary text-2xl"></i>
            <span class="text-xl font-bold text-primary">云端文件存储中心</span>
          </a>
        </div>
        
        <nav class="hidden md:flex items-center space-x-8">
          <a href="#" class="text-gray-700 hover:text-primary transition-colors">首页</a>
          <a href="#upload" class="text-gray-700 hover:text-primary transition-colors">上传文件</a>
          <a href="#files" class="text-gray-700 hover:text-primary transition-colors">我的文件</a>
          <a href="#help" class="text-gray-700 hover:text-primary transition-colors">帮助指南</a>
        </nav>
        
        <div class="flex items-center space-x-4">
          <button id="login-btn" class="px-4 py-2 text-primary border border-primary rounded-lg hover:bg-primary/5 transition-colors">
            <i class="fa fa-user mr-1"></i> 登录
          </button>
          <button class="md:hidden text-gray-700 focus:outline-none" id="mobile-menu-button">
            <i class="fa fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>
    
    <!-- 移动端菜单 -->
    <div class="md:hidden hidden bg-white border-t" id="mobile-menu">
      <div class="container mx-auto px-4 py-3 space-y-3">
        <a href="#" class="block text-gray-700 hover:text-primary transition-colors py-2">首页</a>
        <a href="#upload" class="block text-gray-700 hover:text-primary transition-colors py-2">上传文件</a>
        <a href="#files" class="block text-gray-700 hover:text-primary transition-colors py-2">我的文件</a>
        <a href="#help" class="block text-gray-700 hover:text-primary transition-colors py-2">帮助指南</a>
        <a href="#" class="block text-primary hover:text-primary/80 transition-colors py-2">
          <i class="fa fa-user mr-1"></i> 登录
        </a>
      </div>
    </div>
  </header>

  <!-- 主内容 -->
  <main class="pt-16">
    <!-- 英雄区域 -->
    <section class="gradient-bg text-white py-16 md:py-24">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-3xl mx-auto text-center">
          <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold leading-tight mb-6">
            安全可靠的云端文件存储
          </h1>
          <p class="text-[clamp(1rem,2vw,1.25rem)] text-blue-100 mb-8">
            上传你的文件到云端，随时随地访问，安全可靠
          </p>
          <a href="#upload" class="inline-block px-8 py-3 bg-secondary text-white font-medium rounded-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            立即上传 <i class="fa fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    </section>

    <!-- 上传区域 -->
    <section id="upload" class="py-16 bg-white">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">上传到云端</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">支持拖放上传或点击选择文件，文件将安全存储在云端</p>
          </div>
          
          <!-- 未登录提示 -->
          <div id="not-logged-in" class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center upload-shadow bg-white">
            <div class="mb-4">
              <i class="fa fa-user-circle text-5xl text-gray-400"></i>
            </div>
            <h3 class="text-xl font-medium mb-2">请先登录</h3>
            <p class="text-gray-500 mb-6">登录后即可上传和管理你的云端文件</p>
            <button id="upload-login-btn" class="inline-block px-6 py-3 bg-primary text-white font-medium rounded-lg cursor-pointer hover:bg-primary/90 transition-colors">
              <i class="fa fa-sign-in mr-2"></i>立即登录
            </button>
          </div>
          
          <!-- 上传区域 (默认隐藏，登录后显示) -->
          <div id="drop-area" class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center upload-shadow bg-white transition-all duration-300 hover:border-primary/50 hidden">
            <div class="upload-icon mb-4">
              <i class="fa fa-cloud-upload text-5xl text-primary/70"></i>
            </div>
            <h3 class="text-xl font-medium mb-2">拖放文件到这里</h3>
            <p class="text-gray-500 mb-6">或者点击选择文件上传</p>
            <label class="inline-block px-6 py-3 bg-primary text-white font-medium rounded-lg cursor-pointer hover:bg-primary/90 transition-colors">
              <i class="fa fa-folder-open mr-2"></i>选择文件
              <input type="file" id="file-input" class="hidden" multiple>
            </label>
            <p class="text-xs text-gray-400 mt-4">支持所有文件类型，单个文件大小上限为1GB</p>
          </div>
          
          <!-- 上传进度区域 (默认隐藏) -->
          <div id="upload-progress" class="mt-8 hidden">
            <div class="flex justify-between items-center mb-2">
              <span id="file-name" class="font-medium"></span>
              <span id="progress-percentage" class="text-primary font-medium">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div id="progress-bar" class="bg-primary h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <div class="flex justify-between items-center mt-2 text-sm text-gray-500">
              <span id="upload-speed">0 MB/s</span>
              <span id="upload-remaining">剩余时间: 计算中...</span>
            </div>
            <div class="mt-4 flex justify-end">
              <button id="cancel-upload" class="px-4 py-2 text-sm text-danger border border-danger rounded-lg hover:bg-danger/5 transition-colors">
                <i class="fa fa-times mr-1"></i> 取消上传
              </button>
            </div>
          </div>
          
          <!-- 上传设置 -->
          <div class="mt-8 bg-light rounded-xl p-6 hidden" id="upload-settings">
            <h3 class="text-lg font-medium mb-4 flex items-center">
              <i class="fa fa-cog text-primary mr-2"></i> 文件信息
            </h3>
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">文件名称</label>
                <input type="text" id="file-name-input" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all" placeholder="为你的文件命名">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">文件分类</label>
                <select id="file-category" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all">
                  <option value="">选择分类</option>
                  <option value="document">文档</option>
                  <option value="image">图片</option>
                  <option value="video">视频</option>
                  <option value="audio">音频</option>
                  <option value="archive">压缩包</option>
                  <option value="other">其他</option>
                </select>
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">文件描述 (可选)</label>
                <textarea id="file-description" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all" placeholder="描述文件内容、用途等信息"></textarea>
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">权限设置</label>
                <div class="flex items-center space-x-4">
                  <label class="inline-flex items-center">
                    <input type="radio" name="file-permission" value="private" class="form-radio text-primary" checked>
                    <span class="ml-2">仅自己可见</span>
                  </label>
                  <label class="inline-flex items-center">
                    <input type="radio" name="file-permission" value="public" class="form-radio text-primary">
                    <span class="ml-2">公开访问</span>
                  </label>
                  <label class="inline-flex items-center">
                    <input type="radio" name="file-permission" value="shared" class="form-radio text-primary">
                    <span class="ml-2">指定人可见</span>
                  </label>
                </div>
              </div>
            </div>
            <div class="mt-4 flex justify-end">
              <button id="save-file" class="px-6 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                <i class="fa fa-cloud-upload mr-2"></i>上传到云端
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 我的文件 -->
    <section id="files" class="py-16 bg-gray-50">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">我的云端文件</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">查看和管理你存储在云端的所有文件</p>
          </div>
          
          <!-- 未登录提示 -->
          <div id="files-not-logged-in" class="text-center p-12 bg-white rounded-xl">
            <i class="fa fa-lock text-4xl text-gray-400 mb-4"></i>
            <p class="text-gray-600">请先登录查看你的文件</p>
            <button id="files-login-btn" class="inline-block mt-4 px-4 py-2 text-sm text-primary border border-primary rounded-lg hover:bg-primary/5 transition-colors">
              <i class="fa fa-sign-in mr-1"></i> 立即登录
            </button>
          </div>
          
          <!-- 文件列表区域 (默认隐藏，登录后显示) -->
          <div id="files-container" class="hidden">
            <!-- 搜索和筛选 -->
            <div class="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
              <div class="relative w-full md:w-64">
                <input type="text" id="files-search" placeholder="搜索文件..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all">
                <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              </div>
              <div class="flex items-center gap-3">
                <select id="files-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all">
                  <option value="all">所有分类</option>
                  <option value="document">文档</option>
                  <option value="image">图片</option>
                  <option value="video">视频</option>
                  <option value="audio">音频</option>
                  <option value="archive">压缩包</option>
                  <option value="other">其他</option>
                </select>
                <button id="apply-filter" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                  <i class="fa fa-filter mr-1"></i> 筛选
                </button>
              </div>
            </div>
            
            <!-- 无文件 -->
            <div id="no-files" class="hidden text-center p-12 bg-white rounded-xl">
              <i class="fa fa-folder-open-o text-4xl text-gray-400 mb-4"></i>
              <p class="text-gray-600">你还没有上传任何文件</p>
              <a href="#upload" class="inline-block mt-4 px-4 py-2 text-sm text-primary border border-primary rounded-lg hover:bg-primary/5 transition-colors">
                <i class="fa fa-upload mr-1"></i> 上传新文件
              </a>
            </div>
            
            <!-- 文件列表 -->
            <div id="files-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              <!-- 文件项目将通过JS动态生成 -->
            </div>
            
            <!-- 分页 -->
            <div id="pagination" class="mt-10 flex justify-center items-center gap-2 hidden">
              <button id="prev-page" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 text-gray-500 hover:border-primary hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                <i class="fa fa-chevron-left"></i>
              </button>
              <span id="page-info" class="text-gray-600">第 1 页，共 0 页</span>
              <button id="next-page" class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-300 text-gray-500 hover:border-primary hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                <i class="fa fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 帮助指南 -->
    <section id="help" class="py-16 bg-white">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">帮助指南</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">解答你在使用过程中可能遇到的问题</p>
          </div>
          
          <div class="space-y-6">
            <!-- 问题 1 -->
            <div class="border border-gray-200 rounded-xl overflow-hidden">
              <button class="w-full px-6 py-4 text-left font-medium flex justify-between items-center focus:outline-none help-question">
                <span>文件存储在哪里？</span>
                <i class="fa fa-chevron-down text-gray-400 transition-transform duration-300"></i>
              </button>
              <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 hidden help-answer">
                <p class="text-gray-600">所有上传的文件都安全存储在云端服务器，你可以在任何设备上登录账户访问你的文件。</p>
              </div>
            </div>
            
            <!-- 问题 2 -->
            <div class="border border-gray-200 rounded-xl overflow-hidden">
              <button class="w-full px-6 py-4 text-left font-medium flex justify-between items-center focus:outline-none help-question">
                <span>文件大小有限制吗？</span>
                <i class="fa fa-chevron-down text-gray-400 transition-transform duration-300"></i>
              </button>
              <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 hidden help-answer">
                <p class="text-gray-600">单个文件上传大小上限为1GB。总存储空间取决于你的账户类型，免费账户提供5GB存储空间，付费账户可获得更多存储空间。</p>
              </div>
            </div>
            
            <!-- 问题 3 -->
            <div class="border border-gray-200 rounded-xl overflow-hidden">
              <button class="w-full px-6 py-4 text-left font-medium flex justify-between items-center focus:outline-none help-question">
                <span>我的文件安全吗？</span>
                <i class="fa fa-chevron-down text-gray-400 transition-transform duration-300"></i>
              </button>
              <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 hidden help-answer">
                <p class="text-gray-600">所有文件传输均采用SSL加密，存储的文件也经过加密处理。你可以设置文件权限，控制谁可以访问你的文件。我们不会查看或分享你的文件内容。</p>
              </div>
            </div>
            
            <!-- 问题 4 -->
            <div class="border border-gray-200 rounded-xl overflow-hidden">
              <button class="w-full px-6 py-4 text-left font-medium flex justify-between items-center focus:outline-none help-question">
                <span>文件会保存多久？</span>
                <i class="fa fa-chevron-down text-gray-400 transition-transform duration-300"></i>
              </button>
              <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 hidden help-answer">
                <p class="text-gray-600">只要你的账户处于活跃状态，文件将一直保存在云端。如果账户长期未使用（超过1年），我们会通过邮件通知你，若仍未活跃，可能会删除文件以释放空间。</p>
              </div>
            </div>
            
            <!-- 问题 5 -->
            <div class="border border-gray-200 rounded-xl overflow-hidden">
              <button class="w-full px-6 py-4 text-left font-medium flex justify-between items-center focus:outline-none help-question">
                <span>如何分享文件给他人？</span>
                <i class="fa fa-chevron-down text-gray-400 transition-transform duration-300"></i>
              </button>
              <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 hidden help-answer">
                <p class="text-gray-600">在文件列表中，点击"分享"按钮，可以生成一个分享链接。你可以设置链接的有效期和访问密码，将链接发送给需要访问文件的人。也可以直接输入对方邮箱地址，邀请其访问。</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- 登录模态框 -->
  <div id="login-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="relative max-w-md w-full bg-white rounded-xl overflow-hidden shadow-2xl">
      <button id="close-login" class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 z-10">
        <i class="fa fa-times"></i>
      </button>
      <div class="p-6">
        <div class="text-center mb-6">
          <h3 class="text-2xl font-bold text-dark">账户登录</h3>
          <p class="text-gray-500 mt-2">登录后管理你的云端文件</p>
        </div>
        
        <form id="login-form">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-envelope text-gray-400"></i>
              </div>
              <input type="email" id="login-email" class="w-full pl-10 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all" placeholder="your@email.com" required>
            </div>
          </div>
          
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-1">密码</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-lock text-gray-400"></i>
              </div>
              <input type="password" id="login-password" class="w-full pl-10 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all" placeholder="输入密码" required>
              <button type="button" id="toggle-password" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600">
                <i class="fa fa-eye-slash"></i>
              </button>
            </div>
            <div class="flex justify-end mt-2">
              <a href="#" class="text-sm text-primary hover:text-primary/80">忘记密码？</a>
            </div>
          </div>
          
          <button type="submit" class="w-full py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 transition-colors">
            登录
          </button>
          
          <div class="mt-4 text-center">
            <p class="text-gray-600">还没有账户？ <a href="#" class="text-primary hover:text-primary/80 font-medium">立即注册</a></p>
          </div>
          
          <div class="relative my-6">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-200"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-white text-gray-500">或使用以下方式登录</span>
            </div>
          </div>
          
          <div class="grid grid-cols-3 gap-3">
            <button type="button" class="flex items-center justify-center py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              <i class="fa fa-google text-red-500"></i>
            </button>
            <button type="button" class="flex items-center justify-center py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              <i class="fa fa-facebook text-blue-600"></i>
            </button>
            <button type="button" class="flex items-center justify-center py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              <i class="fa fa-github text-gray-800"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 预览模态框 -->
  <div id="preview-modal" class="fixed inset-0 bg-black/80 z-50 hidden items-center justify-center p-4">
    <div class="relative max-w-4xl w-full max-h-[90vh] overflow-auto bg-white rounded-xl">
      <button id="close-preview" class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center bg-black/10 rounded-full text-gray-700 hover:bg-black/20 z-10">
        <i class="fa fa-times"></i>
      </button>
      <div id="preview-content" class="p-4">
        <!-- 预览内容将动态生成 -->
      </div>
    </div>
  </div>

  <!-- 通知提示 -->
  <div id="notification" class="fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50 flex items-center">
    <i id="notification-icon" class="mr-2 text-xl"></i>
    <span id="notification-message"></span>
  </div>

  <!-- 页脚 -->
  <footer class="bg-dark text-white py-12">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <i class="fa fa-cloud-upload text-primary text-2xl"></i>
            <span class="text-xl font-bold">云端文件存储中心</span>
          </div>
          <p class="text-gray-400 mb-4">安全可靠的云端文件存储解决方案，让你的文件随时随地可用。</p>
        </div>
        
        <div>
          <h3 class="text-lg font-medium mb-4">快速链接</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">首页</a></li>
            <li><a href="#upload" class="text-gray-400 hover:text-white transition-colors">上传文件</a></li>
            <li><a href="#files" class="text-gray-400 hover:text-white transition-colors">我的文件</a></li>
            <li><a href="#help" class="text-gray-400 hover:text-white transition-colors">帮助指南</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-medium mb-4">联系我们</h3>
          <ul class="space-y-2">
            <li class="text-gray-400 flex items-center"><i class="fa fa-envelope-o mr-2"></i> support@cloudstorage.com</li>
            <li class="text-gray-400 flex items-center"><i class="fa fa-phone mr-2"></i> 400-123-4567</li>
            <li class="text-gray-400 flex items-center"><i class="fa fa-map-marker mr-2"></i> 北京市海淀区科技园区</li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500 text-sm">
        <p>&copy; 2023 云端文件存储中心 | 隐私政策 | 服务条款</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // DOM元素
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const loginBtn = document.getElementById('login-btn');
    const uploadLoginBtn = document.getElementById('upload-login-btn');
    const filesLoginBtn = document.getElementById('files-login-btn');
    const loginModal = document.getElementById('login-modal');
    const closeLogin = document.getElementById('close-login');
    const loginForm = document.getElementById('login-form');
    const loginEmail = document.getElementById('login-email');
    const loginPassword = document.getElementById('login-password');
    const togglePassword = document.getElementById('toggle-password');
    const notLoggedIn = document.getElementById('not-logged-in');
    const dropArea = document.getElementById('drop-area');
    const uploadSettings = document.getElementById('upload-settings');
    const fileInput = document.getElementById('file-input');
    const fileNameElement = document.getElementById('file-name');
    const uploadProgress = document.getElementById('upload-progress');
    const progressBar = document.getElementById('progress-bar');
    const progressPercentage = document.getElementById('progress-percentage');
    const uploadSpeed = document.getElementById('upload-speed');
    const uploadRemaining = document.getElementById('upload-remaining');
    const saveFileButton = document.getElementById('save-file');
    const cancelUploadButton = document.getElementById('cancel-upload');
    const fileNameInput = document.getElementById('file-name-input');
    const fileCategoryInput = document.getElementById('file-category');
    const fileDescriptionInput = document.getElementById('file-description');
    const helpQuestions = document.querySelectorAll('.help-question');
    const notification = document.getElementById('notification');
    const notificationIcon = document.getElementById('notification-icon');
    const notificationMessage = document.getElementById('notification-message');
    const filesNotLoggedIn = document.getElementById('files-not-logged-in');
    const filesContainer = document.getElementById('files-container');
    const noFiles = document.getElementById('no-files');
    const filesList = document.getElementById('files-list');
    const filesSearch = document.getElementById('files-search');
    const filesFilter = document.getElementById('files-filter');
    const applyFilterBtn = document.getElementById('apply-filter');
    const prevPageBtn = document.getElementById('prev-page');
    const nextPageBtn = document.getElementById('next-page');
    const pageInfo = document.getElementById('page-info');
    const previewModal = document.getElementById('preview-modal');
    const previewContent = document.getElementById('preview-content');
    const closePreview = document.getElementById('close-preview');
    
    // 状态变量
    let selectedFiles = [];
    let currentFileIndex = 0;
    let isUploading = false;
    let uploadedFiles = [];
    let currentPage = 1;
    let itemsPerPage = 9;
    let totalPages = 1;
    let isLoggedIn = false;
    let authToken = null;
    
    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
      // 检查本地存储中的登录状态
      checkLoginStatus();
      setupEventListeners();
    });
    
    // 检查登录状态
    function checkLoginStatus() {
      const savedToken = localStorage.getItem('authToken');
      if (savedToken) {
        // 模拟已登录状态
        isLoggedIn = true;
        authToken = savedToken;
        updateUIForLoginStatus();
        
        // 加载用户文件
        loadUserFiles();
      } else {
        isLoggedIn = false;
        authToken = null;
        updateUIForLoginStatus();
      }
    }
    
    // 根据登录状态更新UI
    function updateUIForLoginStatus() {
      if (isLoggedIn) {
        // 显示上传区域，隐藏未登录提示
        notLoggedIn.classList.add('hidden');
        dropArea.classList.remove('hidden');
        uploadSettings.classList.remove('hidden');
        
        // 显示文件列表区域，隐藏未登录提示
        filesNotLoggedIn.classList.add('hidden');
        filesContainer.classList.remove('hidden');
        
        // 更新登录按钮为用户信息
        loginBtn.innerHTML = '<i class="fa fa-user-circle mr-1"></i> 我的账户';
      } else {
        // 显示未登录提示，隐藏上传区域
        notLoggedIn.classList.remove('hidden');
        dropArea.classList.add('hidden');
        uploadSettings.classList.add('hidden');
        uploadProgress.classList.add('hidden');
        
        // 显示未登录提示，隐藏文件列表区域
        filesNotLoggedIn.classList.remove('hidden');
        filesContainer.classList.add('hidden');
        
        // 恢复登录按钮
        loginBtn.innerHTML = '<i class="fa fa-user mr-1"></i> 登录';
      }
    }
    
    // 设置所有事件监听器
    function setupEventListeners() {
      // 移动端菜单切换
      mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });
      
      // 导航栏滚动效果
      window.addEventListener('scroll', () => {
        const header = document.querySelector('header');
        if (window.scrollY > 50) {
          header.classList.add('shadow');
          header.classList.remove('shadow-sm');
        } else {
          header.classList.remove('shadow');
          header.classList.add('shadow-sm');
        }
      });
      
      // 平滑滚动
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          
          const targetId = this.getAttribute('href');
          if (targetId === '#') return;
          
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop - 80,
              behavior: 'smooth'
            });
            
            // 关闭移动菜单
            if (!mobileMenu.classList.contains('hidden')) {
              mobileMenu.classList.add('hidden');
            }
          }
        });
      });
      
      // 登录相关
      loginBtn.addEventListener('click', openLoginModal);
      uploadLoginBtn.addEventListener('click', openLoginModal);
      filesLoginBtn.addEventListener('click', openLoginModal);
      closeLogin.addEventListener('click', closeLoginModal);
      
      // 密码显示切换
      togglePassword.addEventListener('click', () => {
        const type = loginPassword.getAttribute('type') === 'password' ? 'text' : 'password';
        loginPassword.setAttribute('type', type);
        
        // 切换图标
        const icon = togglePassword.querySelector('i');
        if (type === 'password') {
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      });
      
      // 登录表单提交
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        handleLogin();
      });
      
      // 拖放事件
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
      });
      
      ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
      });
      
      ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
      });
      
      // 处理文件拖放
      dropArea.addEventListener('drop', handleDrop, false);
      
      // 处理文件选择
      fileInput.addEventListener('change', function() {
        if (this.files.length) {
          handleFiles(this.files);
        }
      });
      
      // 点击上传区域触发文件选择
      dropArea.addEventListener('click', function(e) {
        if (!e.target.closest('label') && !e.target.closest('input') && !isUploading) {
          fileInput.click();
        }
      });
      
      // 保存文件
      saveFileButton.addEventListener('click', startUploadingFiles);
      
      // 取消上传
      cancelUploadButton.addEventListener('click', cancelUpload);
      
      // 帮助指南折叠面板
      helpQuestions.forEach(question => {
        question.addEventListener('click', () => {
          const answer = question.nextElementSibling;
          const icon = question.querySelector('i');
          
          answer.classList.toggle('hidden');
          icon.classList.toggle('rotate-180');
        });
      });
      
      // 文件列表相关
      applyFilterBtn.addEventListener('click', applyFilters);
      filesSearch.addEventListener('input', debounce(applyFilters, 500));
      filesFilter.addEventListener('change', applyFilters);
      
      // 分页
      prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
          currentPage--;
          applyFilters();
        }
      });
      
      nextPageBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
          currentPage++;
          applyFilters();
        }
      });
      
      // 预览模态框
      closePreview.addEventListener('click', closePreviewModal);
      previewModal.addEventListener('click', (e) => {
        if (e.target === previewModal) {
          closePreviewModal();
        }
      });
    }
    
    // 打开登录模态框
    function openLoginModal() {
      loginModal.classList.remove('hidden');
      loginModal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }
    
    // 关闭登录模态框
    function closeLoginModal() {
      loginModal.classList.add('hidden');
      loginModal.classList.remove('flex');
      document.body.style.overflow = '';
    }
    
    // 处理登录
    function handleLogin() {
      // 在实际应用中，这里应该发送登录请求到服务器
      const email = loginEmail.value;
      const password = loginPassword.value;
      
      // 模拟登录成功
      if (email && password) {
        // 显示加载状态
        loginForm.querySelector('button[type="submit"]').innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i> 登录中...';
        loginForm.querySelector('button[type="submit"]').disabled = true;
        
        // 模拟网络请求延迟
        setTimeout(() => {
          // 生成模拟的认证令牌
          const token = 'mock-token-' + Date.now();
          localStorage.setItem('authToken', token);
          
          // 更新状态
          isLoggedIn = true;
          authToken = token;
          
          // 关闭登录模态框
          closeLoginModal();
          
          // 更新UI
          updateUIForLoginStatus();
          
          // 加载用户文件
          loadUserFiles();
          
          // 显示成功通知
          showNotification('登录成功', 'success');
          
          // 重置表单
          loginForm.reset();
          loginForm.querySelector('button[type="submit"]').innerHTML = '登录';
          loginForm.querySelector('button[type="submit"]').disabled = false;
        }, 1500);
      }
    }
    
    // 加载用户文件
    function loadUserFiles() {
      // 在实际应用中，这里应该从服务器获取用户文件列表
      
      // 模拟文件数据
      uploadedFiles = [
        {
          id: 'file-1',
          name: '项目计划书',
          originalName: 'project-plan.pdf',
          size: 2048000, // 2MB
          type: 'application/pdf',
          category: 'document',
          description: '2023年Q3项目开发计划',
          url: 'https://example.com/files/project-plan.pdf',
          permission: 'private',
          uploadDate: '2023-06-15T10:30:00Z'
        },
        {
          id: 'file-2',
          name: '产品原型图',
          originalName: 'product-mockup.png',
          size: 5120000, // 5MB
          type: 'image/png',
          category: 'image',
          description: '新版APP界面设计',
          url: 'https://example.com/files/product-mockup.png',
          permission: 'shared',
          uploadDate: '2023-06-12T14:20:00Z'
        },
        {
          id: 'file-3',
          name: '会议录音',
          originalName: 'meeting-recording.mp3',
          size: 15360000, // 15MB
          type: 'audio/mpeg',
          category: 'audio',
          description: '每周团队例会录音',
          url: 'https://example.com/files/meeting-recording.mp3',
          permission: 'private',
          uploadDate: '2023-06-10T09:15:00Z'
        },
        {
          id: 'file-4',
          name: '演示视频',
          originalName: 'demo-video.mp4',
          size: 52428800, // 50MB
          type: 'video/mp4',
          category: 'video',
          description: '产品功能演示视频',
          url: 'https://example.com/files/demo-video.mp4',
          permission: 'public',
          uploadDate: '2023-06-08T16:45:00Z'
        },
        {
          id: 'file-5',
          name: '数据备份',
          originalName: 'data-backup.zip',
          size: 104857600, // 100MB
          type: 'application/zip',
          category: 'archive',
          description: '6月份数据备份',
          url: 'https://example.com/files/data-backup.zip',
          permission: 'private',
          uploadDate: '2023-06-01T18:00:00Z'
        }
      ];
      
      // 更新文件列表UI
      applyFilters();
    }
    
    // 显示通知
    function showNotification(message, type = 'info') {
      // 设置通知内容和样式
      notificationMessage.textContent = message;
      
      // 设置图标和背景色
      notificationIcon.className = '';
      if (type === 'success') {
        notificationIcon.classList.add('fa', 'fa-check-circle', 'text-success');
        notification.classList.add('bg-success/10', 'text-success', 'border', 'border-success/30');
      } else if (type === 'error') {
        notificationIcon.classList.add('fa', 'fa-exclamation-circle', 'text-danger');
        notification.classList.add('bg-danger/10', 'text-danger', 'border', 'border-danger/30');
      } else {
        notificationIcon.classList.add('fa', 'fa-info-circle', 'text-primary');
        notification.classList.add('bg-primary/10', 'text-primary', 'border', 'border-primary/30');
      }
      
      // 显示通知
      notification.classList.remove('translate-y-20', 'opacity-0');
      notification.classList.add('translate-y-0', 'opacity-100');
      
      // 3秒后隐藏通知
      setTimeout(() => {
        notification.classList.remove('translate-y-0', 'opacity-100');
        notification.classList.add('translate-y-20', 'opacity-0');
        
        // 清除类以避免冲突
        setTimeout(() => {
          notification.className = 'fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50 flex items-center';
        }, 300);
      }, 3000);
    }
    
    // 拖放辅助函数
    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }
    
    function highlight() {
      dropArea.classList.add('border-primary');
      dropArea.classList.add('bg-primary/5');
    }
    
    function unhighlight() {
      dropArea.classList.remove('border-primary');
      dropArea.classList.remove('bg-primary/5');
    }
    
    // 处理文件拖放
    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      
      if (files.length) {
        handleFiles(files);
      }
    }
    
    // 处理选中的文件
    function handleFiles(files) {
      // 转换为数组以便处理
      selectedFiles = Array.from(files);
      currentFileIndex = 0;
      
      // 检查文件大小 (上限1GB)
      selectedFiles.forEach(file => {
        if (file.size > 1024 * 1024 * 1024) {
          showNotification(`文件 ${file.name} 超过1GB上限，无法上传`, 'error');
          // 从列表中移除过大的文件
          selectedFiles = selectedFiles.filter(f => f.size <= 1024 * 1024 * 1024);
        }
      });
      
      // 如果有文件，显示第一个文件的信息
      if (selectedFiles.length > 0) {
        const firstFile = selectedFiles[0];
        fileNameElement.textContent = firstFile.name;
        fileNameInput.value = firstFile.name.replace(/\.[^/.]+$/, "");
        
        // 尝试根据文件扩展名设置分类
        const ext = firstFile.name.split('.').pop().toLowerCase();
        setCategoryByExtension(ext);
        
        // 显示上传进度区域
        uploadProgress.classList.remove('hidden');
        progressBar.style.width = '0%';
        progressPercentage.textContent = '0%';
        
        // 启用保存按钮
        saveFileButton.disabled = false;
      } else {
        showNotification('没有可上传的文件', 'info');
      }
    }
    
    // 根据文件扩展名设置分类
    function setCategoryByExtension(ext) {
      const imageExts = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg', 'webp'];
      const videoExts = ['mp4', 'webm', 'mov', 'avi', 'mkv', 'flv'];
      const audioExts = ['mp3', 'wav', 'ogg', 'flac', 'aac'];
      const docExts = ['txt', 'pdf', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx', 'odt', 'ods', 'odp'];
      const archiveExts = ['zip', 'rar', '7z', 'tar', 'gz', 'bz2'];
      
      if (imageExts.includes(ext)) {
        fileCategoryInput.value = 'image';
      } else if (videoExts.includes(ext)) {
        fileCategoryInput.value = 'video';
      } else if (audioExts.includes(ext)) {
        fileCategoryInput.value = 'audio';
      } else if (docExts.includes(ext)) {
        fileCategoryInput.value = 'document';
      } else if (archiveExts.includes(ext)) {
        fileCategoryInput.value = 'archive';
      } else {
        fileCategoryInput.value = 'other';
      }
    }
    
    // 开始上传文件到云端
    function startUploadingFiles() {
      if (selectedFiles.length === 0) return;
      
      // 验证必填字段
      if (!fileNameInput.value.trim()) {
        showNotification('请输入文件名称', 'error');
        return;
      }
      
      // 禁用按钮
      saveFileButton.disabled = true;
      isUploading = true;
      
      // 开始处理当前文件
      uploadFileToCloud(selectedFiles[currentFileIndex]);
    }
    
    // 上传文件到云端
    function uploadFileToCloud(file) {
      // 更新进度显示
      fileNameElement.textContent = file.name;
      progressBar.style.width = '0%';
      progressPercentage.textContent = '0%';
      
      const startTime = new Date().getTime();
      const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
      
      // 模拟上传进度
      let progress = 0;
      const progressInterval = setInterval(() => {
        // 模拟进度增加
        progress += Math.random() * 5;
        if (progress > 98) progress = 98;
        
        progressBar.style.width = `${progress}%`;
        progressPercentage.textContent = `${Math.round(progress)}%`;
        
        // 计算上传速度和剩余时间
        const elapsedTime = (new Date().getTime() - startTime) / 1000; // 秒
        const uploadedMB = (progress / 100) * parseFloat(fileSizeMB);
        const speed = (uploadedMB / elapsedTime).toFixed(2);
        uploadSpeed.textContent = `${speed} MB/s`;
        
        // 计算剩余时间
        if (progress > 0) {
          const estimatedTotalTime = (elapsedTime / progress) * 100;
          const remainingTime = Math.max(0, estimatedTotalTime - elapsedTime);
          uploadRemaining.textContent = `剩余时间: ${formatTime(remainingTime)}`;
        }
      }, 300);
      
      // 创建FormData对象，准备上传
      const formData = new FormData();
      formData.append('file', file);
      formData.append('name', fileNameInput.value.trim());
      formData.append('category', fileCategoryInput.value);
      formData.append('description', fileDescriptionInput.value.trim());
      
      // 获取权限设置
      const permission = document.querySelector('input[name="file-permission"]:checked').value;
      formData.append('permission', permission);
      
      // 模拟云端上传请求
      // 在实际应用中，这里应该使用fetch或axios发送真实的上传请求
      setTimeout(() => {
        clearInterval(progressInterval);
        
        // 模拟上传完成
        progressBar.style.width = '100%';
        progressPercentage.textContent = '100%';
        uploadRemaining.textContent = '上传完成';
        
        // 创建上传成功的文件对象
        const newFile = {
          id: 'file-' + Date.now(),
          name: fileNameInput.value.trim(),
          originalName: file.name,
          size: file.size,
          type: file.type,
          category: fileCategoryInput.value,
          description: fileDescriptionInput.value.trim(),
          url: `https://example.com/files/${Date.now()}-${file.name}`,
          permission: permission,
          uploadDate: new Date().toISOString()
        };
        
        // 添加到文件列表
        uploadedFiles.unshift(newFile);
        
        // 检查是否有更多文件
        currentFileIndex++;
        if (currentFileIndex < selectedFiles.length) {
          // 处理下一个文件
          setTimeout(() => {
            // 更新文件名输入
            const nextFile = selectedFiles[currentFileIndex];
            fileNameInput.value = nextFile.name.replace(/\.[^/.]+$/, "");
            
            // 尝试设置分类
            const ext = nextFile.name.split('.').pop().toLowerCase();
            setCategoryByExtension(ext);
            
            // 清空描述
            fileDescriptionInput.value = '';
            
            // 处理下一个文件
            uploadFileToCloud(nextFile);
          }, 1000);
        } else {
          // 所有文件上传完成
          setTimeout(() => {
            showNotification(`成功上传 ${selectedFiles.length} 个文件到云端`, 'success');
            
            // 重置表单
            resetUploadArea();
            resetUploadForm();
            
            // 更新文件列表
            applyFilters();
            
            isUploading = false;
          }, 1000);
        }
      }, 5000); // 模拟5秒上传时间
    }
    
    // 取消上传
    function cancelUpload() {
      // 重置上传状态
      selectedFiles = [];
      currentFileIndex = 0;
      isUploading = false;
      
      resetUploadArea();
      showNotification('上传已取消', 'info');
    }
    
    // 重置上传区域
    function resetUploadArea() {
      uploadProgress.classList.add('hidden');
      progressBar.style.width = '0%';
      progressPercentage.textContent = '0%';
      uploadSpeed.textContent = '0 MB/s';
      uploadRemaining.textContent = '剩余时间: 计算中...';
      saveFileButton.disabled = true;
      fileInput.value = '';
    }
    
    // 重置上传表单
    function resetUploadForm() {
      fileNameInput.value = '';
      fileCategoryInput.value = '';
      fileDescriptionInput.value = '';
      document.querySelector('input[name="file-permission"][value="private"]').checked = true;
    }
    
    // 格式化时间（秒 -> 分:秒）
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' + secs : secs}`;
    }
    
    // 应用筛选条件
    function applyFilters() {
      filesList.innerHTML = '';
      
      // 获取筛选条件
      const searchTerm = filesSearch.value.trim().toLowerCase();
      const categoryFilter = filesFilter.value;
      
      // 应用筛选
      let filteredFiles = uploadedFiles.filter(file => {
        // 分类筛选
        if (categoryFilter && categoryFilter !== 'all' && file.category !== categoryFilter) {
          return false;
        }
        
        // 搜索筛选
        if (searchTerm && 
            !file.name.toLowerCase().includes(searchTerm) && 
            !file.originalName.toLowerCase().includes(searchTerm) &&
            !(file.description && file.description.toLowerCase().includes(searchTerm))) {
          return false;
        }
        
        return true;
      });
      
      // 计算分页
      totalPages = Math.ceil(filteredFiles.length / itemsPerPage);
      if (currentPage > totalPages && totalPages > 0) {
        currentPage = totalPages;
      }
      
      // 分页处理
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedFiles = filteredFiles.slice(startIndex, endIndex);
      
      // 更新分页信息
      pageInfo.textContent = `第 ${currentPage} 页，共 ${totalPages || 1} 页`;
      
      // 更新分页按钮状态
      prevPageBtn.disabled = currentPage <= 1;
      nextPageBtn.disabled = currentPage >= totalPages || totalPages === 0;
      
      // 显示/隐藏分页控件
      if (filteredFiles.length <= itemsPerPage) {
        document.getElementById('pagination').classList.add('hidden');
      } else {
        document.getElementById('pagination').classList.remove('hidden');
      }
      
      // 更新列表
      if (paginatedFiles.length > 0) {
        paginatedFiles.forEach(file => {
          addFileToFilesList(file);
        });
        filesList.classList.remove('hidden');
        noFiles.classList.add('hidden');
      } else {
        filesList.classList.add('hidden');
        noFiles.classList.remove('hidden');
      }
    }
    
    // 添加文件到文件列表
    function addFileToFilesList(file) {
      // 格式化文件大小
      let fileSize;
      if (file.size > 1024 * 1024) {
        fileSize = (file.size / (1024 * 1024)).toFixed(1) + ' MB';
      } else if (file.size > 1024) {
        fileSize = (file.size / 1024).toFixed(1) + ' KB';
      } else {
        fileSize = file.size + ' B';
      }
      
      // 格式化日期
      const date = new Date(file.uploadDate);
      const formattedDate = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;
      
      // 获取文件图标
      let fileIcon = getFileIcon(file);
      
      // 获取权限图标
      let permissionIcon = '';
      switch(file.permission) {
        case 'private':
          permissionIcon = '<i class="fa fa-lock text-gray-500" title="仅自己可见"></i>';
          break;
        case 'public':
          permissionIcon = '<i class="fa fa-globe text-green-500" title="公开访问"></i>';
          break;
        case 'shared':
          permissionIcon = '<i class="fa fa-users text-blue-500" title="指定人可见"></i>';
          break;
      }
      
      // 创建文件项目元素
      const fileItem = document.createElement('div');
      fileItem.className = 'bg-white rounded-xl overflow-hidden shadow-md card-hover';
      fileItem.dataset.fileId = file.id;
      
      fileItem.innerHTML = `
        <div class="p-5">
          <div class="flex justify-between items-start mb-4">
            <div class="flex items-start">
              <div class="mr-3 text-2xl ${fileIcon.color}">${fileIcon.icon}</div>
              <div>
                <h3 class="font-semibold text-lg">${file.name}</h3>
                <p class="text-sm text-gray-500">${file.originalName}</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <span class="px-2 py-1 text-xs font-medium ${getCategoryColor(file.category)} rounded-full">${getCategoryName(file.category)}</span>
              ${permissionIcon}
            </div>
          </div>
          <div class="flex items-center text-sm text-gray-500 mb-4">
            <span class="flex items-center mr-4"><i class="fa fa-calendar-o mr-1"></i> ${formattedDate}</span>
            <span class="flex items-center"><i class="fa fa-file-o mr-1"></i> ${fileSize}</span>
          </div>
          <div class="border-t border-gray-100 pt-4 flex justify-between items-center">
            <div class="flex gap-2">
              ${canPreviewFile(file) ? `
                <button class="p-2 text-gray-500 hover:text-primary transition-colors preview-file" title="预览" data-id="${file.id}">
                  <i class="fa fa-eye"></i>
                </button>
              ` : ''}
              <button class="p-2 text-gray-500 hover:text-primary transition-colors download-file" title="下载" data-id="${file.id}">
                <i class="fa fa-download"></i>
              </button>
              <button class="p-2 text-gray-500 hover:text-primary transition-colors share-file" title="分享" data-id="${file.id}">
                <i class="fa fa-share-alt"></i>
              </button>
            </div>
            <button class="p-2 text-gray-500 hover:text-danger transition-colors delete-file" title="删除" data-id="${file.id}">
              <i class="fa fa-trash"></i>
            </button>
          </div>
        </div>
      `;
      
      // 添加事件监听器
      if (canPreviewFile(file)) {
        fileItem.querySelector('.preview-file').addEventListener('click', () => {
          previewFile(file.id);
        });
      }
      
      fileItem.querySelector('.download-file').addEventListener('click', () => {
        downloadFile(file.id);
      });
      
      fileItem.querySelector('.share-file').addEventListener('click', () => {
        shareFile(file.id);
      });
      
      fileItem.querySelector('.delete-file').addEventListener('click', () => {
        deleteFile(file.id);
      });
      
      // 添加到列表
      filesList.appendChild(fileItem);
    }
    
    // 获取文件图标
    function getFileIcon(file) {
      const type = file.type.split('/')[0];
      const ext = file.originalName.split('.').pop().toLowerCase();
      
      switch (type) {
        case 'image':
          return { icon: '<i class="fa fa-file-image-o"></i>', color: 'text-green-500' };
        case 'video':
          return { icon: '<i class="fa fa-file-video-o"></i>', color: 'text-purple-500' };
        case 'audio':
          return { icon: '<i class="fa fa-file-audio-o"></i>', color: 'text-red-500' };
        case 'text':
          return { icon: '<i class="fa fa-file-text-o"></i>', color: 'text-blue-500' };
        default:
          if (['pdf', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx'].includes(ext)) {
            return { icon: '<i class="fa fa-file-text-o"></i>', color: 'text-blue-500' };
          } else if (['zip', 'rar', '7z', 'tar', 'gz'].includes(ext)) {
            return { icon: '<i class="fa fa-file-archive-o"></i>', color: 'text-yellow-500' };
          } else {
            return { icon: '<i class="fa fa-file-o"></i>', color: 'text-gray-500' };
          }
      }
    }
    
    // 获取分类名称
    function getCategoryName(category) {
      const categories = {
        'document': '文档',
        'image': '图片',
        'video': '视频',
        'audio': '音频',
        'archive': '压缩包',
        'other': '其他'
      };
      return categories[category] || '未分类';
    }
    
    // 获取分类颜色
    function getCategoryColor(category) {
      const colors = {
        'document': 'bg-blue-100 text-blue-800',
        'image': 'bg-green-100 text-green-800',
        'video': 'bg-purple-100 text-purple-800',
        'audio': 'bg-red-100 text-red-800',
        'archive': 'bg-yellow-100 text-yellow-800',
        'other': 'bg-gray-100 text-gray-800'
      };
      return colors[category] || 'bg-gray-100 text-gray-800';
    }
    
    // 检查文件是否可以预览
    function canPreviewFile(file) {
      const type = file.type.split('/')[0];
      const ext = file.originalName.split('.').pop().toLowerCase();
      
      // 可以预览的类型
      return type === 'image' || 
             type === 'video' || 
             type === 'audio' || 
             type === 'text' ||
             ext === 'pdf';
    }
    
    // 预览文件
    function previewFile(fileId) {
      const file = uploadedFiles.find(f => f.id === fileId);
      if (!file) return;
      
      previewContent.innerHTML = '';
      
      const type = file.type.split('/')[0];
      const ext = file.originalName.split('.').pop().toLowerCase();
      
      // 根据文件类型生成预览
      if (type === 'image') {
        previewContent.innerHTML = `
          <div class="flex justify-center">
            <img src="${file.url}" alt="${file.name}" class="max-w-full max-h-[70vh] object-contain">
          </div>
          <div class="mt-4">
            <h3 class="text-xl font-bold">${file.name}</h3>
            <p class="text-gray-600 mt-2">${file.description || '无描述'}</p>
          </div>
        `;
      } else if (type === 'video') {
        previewContent.innerHTML = `
          <div class="flex justify-center">
            <video controls class="max-w-full max-h-[70vh]">
              <source src="${file.url}" type="${file.type}">
              你的浏览器不支持视频预览
            </video>
          </div>
          <div class="mt-4">
            <h3 class="text-xl font-bold">${file.name}</h3>
            <p class="text-gray-600 mt-2">${file.description || '无描述'}</p>
          </div>
        `;
      } else if (type === 'audio') {
        previewContent.innerHTML = `
          <div class="flex justify-center">
            <audio controls class="w-full max-w-md">
              <source src="${file.url}" type="${file.type}">
              你的浏览器不支持音频预览
           </audio>
          </div>
          <div class="mt-4">
            <h3 class="text-xl font-bold">${file.name}</h3>
            <p class="text-gray-600 mt-2">${file.description || '无描述'}</p>
          </div>
        `;
      } else if (type === 'text' || ext === 'pdf') {
        if (ext === 'pdf') {
          previewContent.innerHTML = `
            <div class="flex justify-center">
              <embed src="${file.url}" type="application/pdf" width="100%" height="600px" />
            </div>
            <div class="mt-4">
              <h3 class="text-xl font-bold">${file.name}</h3>
              <p class="text-gray-600 mt-2">${file.description || '无描述'}</p>
            </div>
          `;
        } else {
          // 文本文件
          previewContent.innerHTML = `
            <div class="bg-gray-100 p-4 rounded-lg overflow-auto max-h-[70vh]">
              <iframe src="${file.url}" class="w-full h-full min-h-[600px] border-none"></iframe>
            </div>
            <div class="mt-4">
              <h3 class="text-xl font-bold">${file.name}</h3>
              <p class="text-gray-600 mt-2">${file.description || '无描述'}</p>
            </div>
          `;
        }
      }
      
      // 显示预览模态框
      previewModal.classList.remove('hidden');
      previewModal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }
    
    // 关闭预览模态框
    function closePreviewModal() {
      previewModal.classList.add('hidden');
      previewModal.classList.remove('flex');
      document.body.style.overflow = '';
    }
    
    // 下载文件
    function downloadFile(fileId) {
      const file = uploadedFiles.find(f => f.id === fileId);
      if (!file) return;
      
      try {
        // 创建下载链接
        const a = document.createElement('a');
        a.href = file.url;
        a.download = file.originalName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        
        showNotification(`开始下载 ${file.name}`, 'success');
      } catch (e) {
        console.error('下载失败:', e);
        showNotification('文件下载失败', 'error');
      }
    }
    
    // 分享文件
    function shareFile(fileId) {
      const file = uploadedFiles.find(f => f.id === fileId);
      if (!file) return;
      
      // 在实际应用中，这里应该生成分享链接
      const shareUrl = `${file.url}?shareToken=${generateRandomString(16)}`;
      
      // 复制链接到剪贴板
      navigator.clipboard.writeText(shareUrl).then(() => {
        showNotification('分享链接已复制到剪贴板', 'success');
      }).catch(err => {
        console.error('无法复制到剪贴板:', err);
        showNotification('复制链接失败，请手动复制', 'error');
      });
    }
    
    // 生成随机字符串
    function generateRandomString(length) {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      let result = '';
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }
    
    // 删除文件
    function deleteFile(fileId) {
      if (!confirm('确定要删除这个文件吗？此操作不可恢复。')) {
        return;
      }
      
      // 模拟删除请求
      // 在实际应用中，这里应该发送删除请求到服务器
      
      // 从数组中移除
      const index = uploadedFiles.findIndex(f => f.id === fileId);
      if (index !== -1) {
        uploadedFiles.splice(index, 1);
        
        // 从DOM中移除
        const element = document.querySelector(`[data-file-id="${fileId}"]`);
        if (element) {
          element.remove();
        }
        
        // 更新列表
        applyFilters();
        
        showNotification('文件已从云端删除', 'success');
      }
    }
    
    // 防抖函数
    function debounce(func, wait) {
      let timeout;
      return function(...args) {
        const context = this;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), wait);
      };
    }
  </script>
</body>
</html>
